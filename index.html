<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hafalan Al-Qur'an TPA</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
        <link rel="icon" type="image/png" sizes="16x16" href="asset/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="asset/favicon-32x32.png">
    <link rel="shortcut icon" href="asset/favicon.ico">

    <!-- Favicon untuk Android -->
    <link rel="icon" type="image/png" sizes="192x192" href="asset/android-chrome-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="asset/android-chrome-512x512.png">

    <!-- Favicon untuk Apple iOS -->
    <link rel="apple-touch-icon" sizes="180x180" href="asset/apple-touch-icon.png">

    <!-- Web App Manifest (Opsional, untuk PWA) -->
    <link rel="manifest" href="asset/site.webmanifest">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>

<body class="container mt-4">
    <h2 class="text-center">Hafalan Al-Qur'an TPA</h2>

    <div class="mb-3">
        <input type="text" id="namaSantri" class="form-control" placeholder="Nama Santri">
        <select id="surah" class="form-control mt-2">
            <option value="">Pilih Surah</option>
        </select>
        <select id="tingkatHafalan" class="form-control mt-2">
            <option value="Belum Hafal">Belum Hafal</option>
            <option value="Masih Belajar">Masih Belajar</option>
            <option value="Sudah Lancar">Sudah Lancar</option>
        </select>
        <button class="btn btn-primary mt-2 w-100" onclick="tambahHafalan()">Simpan</button>
    </div>

    <h3>Rekap Hafalan</h3>
    <table class="table table-striped table-bordered">
        <thead>
            <tr>
                <th>Nama Santri</th>
                <th>Surah</th>
                <th>Tingkat</th>
                <th>Tanggal</th>
                <th>Aksi</th>
            </tr>
        </thead>
        <tbody id="rekapHafalan"></tbody>
    </table>

    <h3>Grafik Perkembangan</h3>
    <canvas id="grafikHafalan"></canvas>

    <script>
        let dataHafalan = JSON.parse(localStorage.getItem('hafalanQuran')) || [];
        const surahList = [
            "An-Naba'", "An-Nazi'at", "Abasa", "At-Takwir", "Al-Infitar", "Al-Mutaffifin",
            "Al-Insyiqaq", "Al-Buruj", "At-Tariq", "Al-A'la", "Al-Ghashiyah", "Al-Fajr",
            "Al-Balad", "Asy-Syams", "Al-Lail", "Ad-Duha", "Asy-Syarh", "At-Tin",
            "Al-'Alaq", "Al-Qadr", "Al-Bayyinah", "Az-Zalzalah", "Al-'Adiyat", "Al-Qari'ah",
            "At-Takatsur", "Al-'Asr", "Al-Humazah", "Al-Fil", "Quraisy", "Al-Ma'un",
            "Al-Kausar", "Al-Kafirun", "An-Nasr", "Al-Lahab", "Al-Ikhlas", "Al-Falaq", "An-Nas",
            "Al-Mulk", "Al-Qalam", "Al-Haqqah", "Al-Ma'arij", "Nuh", "Al-Jinn",
            "Al-Muzzammil", "Al-Muddassir", "Al-Qiyamah", "Al-Insan", "Al-Mursalat",
            "Al-Mujadilah", "Al-Hasyr", "Al-Mumtahanah", "As-Saff", "Al-Jumu'ah",
            "Al-Munafiqun", "At-Taghabun", "At-Talaq", "At-Tahrim"
        ];
        let surahSelect = document.getElementById("surah");

        surahList.forEach(surah => {
            let option = document.createElement("option");
            option.value = surah;
            option.textContent = surah;
            surahSelect.appendChild(option);
        });

        function tambahHafalan() {
            let nama = document.getElementById('namaSantri').value;
            let surah = document.getElementById('surah').value;
            let tingkat = document.getElementById('tingkatHafalan').value;
            let tanggal = new Date().toLocaleDateString('id-ID');

            if (nama && surah) {
                dataHafalan.push({ nama, surah, tingkat, tanggal });
                localStorage.setItem('hafalanQuran', JSON.stringify(dataHafalan));
                tampilkanHafalan();
                updateGrafik();
            }
        }

        function tampilkanHafalan() {
            let rekap = document.getElementById('rekapHafalan');
            rekap.innerHTML = '';
            dataHafalan.forEach((item, index) => {
                rekap.innerHTML += `<tr>
                    <td>${item.nama}</td>
                    <td>${item.surah}</td>
                    <td>${item.tingkat}</td>
                    <td>${item.tanggal}</td>
                    <td><button class='btn btn-danger' onclick='hapusHafalan(${index})'>Hapus</button></td>
                </tr>`;
            });
        }

        function hapusHafalan(index) {
            dataHafalan.splice(index, 1);
            localStorage.setItem('hafalanQuran', JSON.stringify(dataHafalan));
            tampilkanHafalan();
            updateGrafik();
        }

        function updateGrafik() {
            let ctx = document.getElementById('grafikHafalan').getContext('2d');
            let counts = { "Belum Hafal": 0, "Masih Belajar": 0, "Sudah Lancar": 0 };
            dataHafalan.forEach(item => { counts[item.tingkat]++; });

            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: Object.keys(counts),
                    datasets: [{
                        label: 'Jumlah Hafalan',
                        data: Object.values(counts),
                        backgroundColor: ['red', 'yellow', 'green'],
                        borderWidth: 1
                    }]
                },
                options: { responsive: true, plugins: { legend: { display: true } } }
            });
        }

        window.onload = function () {
            Swal.fire({
                title: "Selamat Datang!",
                text: "Selamat datang di Hafalan Al-Qur'an TPA!\n\nCatatan by [Rayhan]",
                icon: "success",
                confirmButtonText: "OK"
            });
            tampilkanHafalan();
            updateGrafik();
        };
    </script>
</body>

</html>
